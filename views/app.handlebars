<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>ThisObjectMaker</title>
  <link rel="shortcut icon" href="/assets/img/favicon.png"/>
  <link rel="stylesheet" type="text/css" href="/assets/style.css"/>
</head>
<body>
  <nav><a href="/login"><img id="logo" src="/assets/img/face.png" alt="face logo"/></a>
  <div class="navlink"><a href="/maker">My Speedruns</a></div>
  <div class="navlink"><a href="/allSpeedruns">All Speedruns</a></div>
    
    
  <div class="navlink" >
  <button id="premiumToggle" class="formSubmit" type="button">Toggle Premium </button>
  </div>
    
  <div class="navlink"><a href="/logout">Log out</a></div>



  </nav>

  <section id="app">

  </section>

  <div id="thisobjectMessage" class='hidden'>
    <img id="speech" src="/assets/img/speech.png" alt="speech box"/>
    <h3><span id="errorMessage"></span></h3>
    <img id="thisobject" src="assets/img/thisObject.png" alt="thisobject"/>
  </div>

  <script src="/assets/appBundle.js"></script>
  
  <script>
  async function refreshPremiumUI() {
    const res = await fetch('/getAccount');
    const { account } = await res.json();
    if (!account) return;

    // Update profile picture
    const logo = document.getElementById('logo');
    if (account.premium) {
      logo.src = '/assets/img/face2.png';
    } else {
      logo.src = '/assets/img/face.png';
    }

    // Update button text
    const btn = document.getElementById('premiumToggle');
    btn.textContent = account.premium ? "Premium: ON" : "Premium: OFF";

    // Hide or show ads
    const ad = document.querySelector('.adBanner');
    if (ad) ad.style.display = account.premium ? 'none' : 'flex';
  }

  async function togglePremium() {
    await fetch('/togglePremium', { method: 'POST' });
    refreshPremiumUI();
  }

  window.addEventListener('DOMContentLoaded', () => {
    refreshPremiumUI();
    document.getElementById('premiumToggle')
      .addEventListener('click', togglePremium);
  });
</script>
</body>
</html>
